<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template id="kbt_account_ext.internal_layout_header">
        <!-- Company Address Information -->
        <!-- Company Name -->
        <t t-set="company_name" t-value="o.company_id.name + ' '"/>

        <!-- Company Address Line 1 -->
        <t t-set="company_address_line_1" t-value="str()"/>

        <t t-if="o.company_id.street">
            <t t-set="company_address_line_1" t-value="company_address_line_1 + str(o.company_id.street) + ' '"/>
        </t>
        <t t-if="o.company_id.street2">
            <t t-set="company_address_line_1" t-value="company_address_line_1 + str(o.company_id.street2) + ' '"/>
        </t>
        <t t-if="o.company_id.zip_id">
            <t t-set="company_address_line_1" t-value="company_address_line_1 + str(o.company_id.zip_id.name) + ' '"/>
        </t>
        <t t-if="o.company_id.state_id">
            <t t-set="company_address_line_1" t-value="company_address_line_1 + str(o.company_id.state_id.name) + ' '"/>
        </t>
        <t t-if="o.company_id.zip">
            <t t-set="company_address_line_1" t-value="company_address_line_1 + str(o.company_id.zip) + ' '"/>
        </t>
        <!-- Country Name keep for future -->
        <!-- <t t-if="o.company_id.country_id">
            <t t-set="company_address_line_1" t-value="company_address_line_1 + str(o.company_id.country_id.name) + ' '"/>
        </t> -->

        <!-- Company Address Line 2 -->
        <t t-set="company_address_line_2" t-value="str()"/>
        <t t-if="o.company_id.phone">
            <t t-set="company_address_line_2" t-value="company_address_line_2 + 'โทร ' + str(o.company_id.phone) + ' '"/>
        </t>
        <t t-if="o.company_id.vat">
            <t t-set="company_address_line_2" t-value="company_address_line_2 + 'เลขประจำตัวผู้เสียภาษี ' + str(o.company_id.vat) + ' '"/>
        </t>

        <!-- Partner Address Information -->
        <!-- Partner Address Line 1 -->
        <t t-set="address_line_1" t-value="str()"/>

        <t t-if="o.partner_id.street">
            <t t-set="address_line_1" t-value="address_line_1 + str(o.partner_id.street) + ' '"/>
        </t>
        <t t-if="o.partner_id.street2">
            <t t-set="address_line_1" t-value="address_line_1 + str(o.partner_id.street2) + ' '"/>
        </t>
        <t t-if="o.partner_id.city">
            <t t-set="address_line_1" t-value="address_line_1 + str(o.partner_id.city) + ' '"/>
        </t>
        <t t-if="o.partner_id.state_id">
            <t t-set="address_line_1" t-value="address_line_1 + str(o.partner_id.state_id.name) + ' '"/>
        </t>
        <t t-if="o.partner_id.zip">
            <t t-set="address_line_1" t-value="address_line_1 + str(o.partner_id.zip)"/>
        </t>

        <!-- Partner Address Line 3 -->
        <t t-set="address_line_3" t-value="'-'"/>
        <t t-if="o.partner_id.phone">
            <t t-set="address_line_3" t-value="str(o.partner_id.phone) + ', '"/>
        </t>
        <t t-if="o.partner_id.mobile">
            <t t-set="address_line_3" t-value="address_line_3 + str(o.partner_id.mobile)"/>
        </t>

        <!-- Partner Address Line 4 -->
        <t t-set="address_line_4" t-value="'-'"/>
        <t t-if="o.partner_id.vat">
            <t t-set="address_line_4" t-value="str(o.partner_id.vat)"/>
        </t>

        <!-- Partner Name & Partner Contact -->
        <t t-if="o.partner_id.parent_id">
            <t t-set="contact_name" t-value="o.partner_id.name"/>

        </t>

        <!-- Invoice Information -->
        <t t-set="invoice_name" t-value="o.name"></t>

        <t t-set="invoice_date" t-value="'-'"/>
        <t t-if="o.invoice_date">
            <t t-set="invoice_date" t-value="o.invoice_date.strftime('%d/%m/%Y')"/>
        </t>
        <t t-set="invoice_date_due" t-value="'-'"/>
        <t t-if="o.invoice_date_due">
            <t t-set="invoice_date_due" t-value="o.invoice_date_due.strftime('%d/%m/%Y')"/>
        </t>
        <t t-set="payment_day" t-value="'-'"/>
        <t t-if="o.invoice_payment_term_id">
            <t t-set="payment_day" t-value="o.invoice_payment_term_id.name"/>
        </t>
        <!-- Header -->
        <div class="header" style="font-size: 14px;">
            <div class="content">
                <div class="row" name="company-logo">
                    <div class="col" style="">
                        <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" class="float-left" style="max-height: 6rem; max-width: 6rem; width: auto; height: auto; display: block;" alt="Logo"/>
                    </div>
                </div>
            </div>

            <div class="content" name="company-info" style="padding-top: 1rem;">
                <div class="row">
                    <div class="col-9">
                        <div>
                            <b><span>บริษัทเกษตรอินโน จำกัด</span></b>
                            <br/>
                            <b><span>KASETINNO Co.,Ltd</span></b>
                        </div>
                    </div>

                    <div class="col-3">
                        <div>
                            <!-- <b><span t-out="customer_name"/></b> -->
                            <b><t t-out="name_bill"></t></b>
                            <br/>
                            <b><t t-out="name_bill_en"></t></b>
                        </div>
                    </div>
                </div>
            </div>

            <div class="content" name="company-address">
                <div class="row">
                    <div class="col">
                        <div>
                            <span><t t-out="company_address_line_1"></t></span>
                            <br/>
                            <span><t t-out="company_address_line_2"></t></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="content w-100" name="partner-address">
                <table class="border-bottom-0 border-dark" style="font-size: 14px; width: 100%; border: 1px solid;">
                    <tr>
                        <th style="width: 20%;">ชื่อ / Name</th>
                        <td style="width: 50%;"><t t-out="o.partner_id.name"/></td>
                        <th style="width: 15%;">เลขที่ / No.</th>
                        <td style="width: 15%;"><t t-out="invoice_name"/></td>
                    </tr>
                    <tr>
                        <th>สาขา / Branch</th>
                        <td>Branchhhhhh</td>
                        <th>วันที่ / Date</th>
                        <td><t t-out="invoice_date"/></td>
                    </tr>
                    <tr>
                        <th>ที่อยู่ / Address</th>
                        <td><t t-out="address_line_1"/></td>
                        <th>อ้างถึงใบกำกับภาษี</th>
                        <td>0000000000</td>
                    </tr>
                    <tr>
                        <th>เลขที่ประจำตัวผู้เสียภาษี</th>
                        <td><t t-out="address_line_4"/></td>
                        <th>วันที่กำกับภาษี</th>
                        <td>dateeee</td>
                    </tr>
                </table>
                <table class="border border-dark" style="font-size: 14px; width: 100%; border: 1px solid;">
                    <tr class="text-center">
                        <th class="border border-dark" style="width: 21%;">
                            <b><span>รหัสลูกค้า/Customer No.</span></b>
                            <br/>
                            <t t-if="o.partner_id.ref">
                                <span t-out="o.partner_id.ref"/>
                            </t>
                            <t t-else="">
                                <span>00000</span>
                            </t>
                        </th>
                        <th class="border border-dark" style="width: 25%;">
                            <b><span>ระยะเวลาชำระเงิน/Credit Term</span></b>
                            <br/>
                            <span t-out="o.invoice_payment_term_id.name"/>
                        </th>
                        <th class="border border-dark" style="width: 15%;">
                            <b><span>Offset Payment</span></b>
                            <br/>
                            <t t-if="o.partner_id.x_offset">
                                <span>True</span>
                            </t>
                            <t t-else="">
                                <span>False</span>
                            </t>
                        </th>
                        <th class="border border-dark" style="width: 23%;">
                            <b><span>วันครบกำหนด/Due Date</span></b>
                            <br/>
                            <span t-out="o.invoice_date.strftime('%d/%m/%Y')"/>
                        </th>
                        <th class="border border-dark" style="width: 16%;">
                            <b><span>สกุลเงิน/Currency</span></b>
                            <br/>
                            <span t-out="o.company_id.currency_id.name"/>
                        </th>
                    </tr>
                </table>
            </div>
        </div>
    </template>

    <template id="kbt_account_ext.internal_layout_footer">
        <!-- Footer -->
        <div class="footer" style="font-size: 14px;">

            <div class="border border-dark row" style="line-height: 1.75rem;">
                <div class="col-6" style="text-align: left;">
                    <div>
                        ยอดรวมสินค้า / บริการ (Goods/Service Amount)
                    </div>
                    <div>
                        ภาษีมูลค่าเพิ่ม (Vat Amount)
                    </div>
                    <div>
                        ภาษีหัก ณ ที่จ่าย (Withholding Tax)
                    </div>
                    <div>
                        จำนวณเงินรวมทั้งสิ้น (Total Amount)
                    </div>
                </div>
                <div class="col-3" style="text-align: left;">
                    <div name="dummy-row" style="visibility: hidden;">
                        -
                    </div>
                    <div name="dummy-row" style="visibility: hidden;">
                        -
                    </div>
                    <div name="dummy-row" style="visibility: hidden;">
                        -
                    </div>
                    <div>
                        <!-- <t t-out="o.amount_total_text"/> -->
                        <t t-out="o.get_amount_total_text(o.amount_total)"/>
                    </div>
                </div>
                <div class="col-3" style="text-align: right;">
                    <div>
                        <t t-out="'{:,.2f}'.format(sum(o.invoice_line_ids.mapped('price_subtotal')))"/>
                    </div>
                    <div>
                        <t t-out="'{:,.2f}'.format(o.amount_tax)"/>
                    </div>
                    <div>
                        <t t-out="'{:,.2f}'.format(o.amount_wht)"/>
                    </div>
                    <div>
                        <t t-out="'{:,.2f}'.format(o.amount_total)"/>
                    </div>
                </div>
            </div>

            <div class="border border-dark row">
                <div class="col-2" style="text-align: left;">
                    <b>
                        <span>วิธีการชำระเงิน</span>
                    </b>
                </div>
                <div class="col-10">
                    <div class="row" style="line-height: 1.75rem;">
                        <div class="col" style="text-align: left;">
                            <div>
                                1. ชำระเงินผ่านบริการชำระเงินข้ามธนาคาร
                            </div>
                            <div>
                                2. โปรดใช้ใบนำฝากพิเศษ (Special Pay-in) ในการชำระเงิน
                            </div>
                            <div>
                                3. หากมีข้อสงสัยโปรดติดต่อ XXXXXX โทร 0899999999
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="border border-dark row">
                <div class="col text-left">
                    <div>
                        คำเตือน: ถ้าไม่มีการทักท้วงรายการข้างต้นประการใดภายใน 14 วัน บริษัทๆ จะถือว่ารายการข้างต้นนี้ถูกต้องแล้ว บริษัทๆ จะคิดค่าล่าช้าในอัตราไม่เกิน
                    </div>
                    <div>
                        2.00% ต่อเดือนสำหรับบิลที่ไม่ชำระตามที่กำหนด / Delay payment fee up to 2.00% per month will be charged on all orverdue bill
                    </div>
                </div>
            </div>

            <div style="text-align: center; position: relative;">
                <div class="row">
                    <div class="border border-dark col-4">
                        <div>
                            <span><b>ผู้ออกเอกสาร</b> (Issued by)</span>
                        </div>
                    </div>
                    <div class="border border-dark col-4">
                        <div>
                            <span><b>ผู้ตรวจสอบ</b> (Checked by)</span>
                        </div>
                    </div>
                    <div class="border border-dark col-4">
                        <div>
                            <span><b>ผู้รับเอกสาร</b> (Approved by)</span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="border border-dark col-4">
                        <div>
                            <span>XXXXXXX</span>
                            <br/>
                            <span>data</span>
                        </div>
                    </div>
                    <div class="border border-dark col-4">
                        <div>
                            <span>XXXXXX</span>
                            <br/>
                            <span>data</span>
                        </div>
                    </div>
                    <div class="border border-dark col-4">
                        <div>
                            <span>XXXX</span>
                            <br/>
                            <span>data</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="kbt_account_ext.internal_layout">
        <t t-call="kbt_account_ext.internal_layout_header"/>
        <!-- Body -->
        <div class="main">
            <t t-call="kbt_account_ext.internal_layout_body"/>
        </div>
        <t t-call="kbt_account_ext.internal_layout_footer"/>
    </template>

    <template id="kbt_account_ext.internal_layout_body">
        <div class="pt-2">
            <table class="table" style="font-size: 13px; width: 100%; margin-top: 10px;">
                <thead class="" style="">
                    <tr class="text-center border border-dark">
                        <th class="border border-dark" style="width: 21%;">
                            <span>รายการที่ Item No.</span>
                        </th>
                        <th class="border border-dark" style="width: 40%;">
                            <span>รายการสินค้า/บริการ Goods/Service</span>
                        </th>
                        <th class="border border-dark" style="width: 23%;">
                            <span>จำนวนสินค้าQuantity</span>
                        </th>
                        <th class="border border-dark" style="width: 16%;">
                            <span>จำนวนเงินAmount</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <t t-set="counter" t-value="1"/>
                    <t t-foreach="o.invoice_line_ids" t-as="line">
                        <tr class="border-right border-left">
                            <td class="text-center border-right border-left border-dark" style="padding-top: 0.75rem; padding-bottom: 0.75rem;">
                                <span t-out="counter"/>
                            </td>
                            <td class="text-left border-right border-dark" style="padding-top: 0.75rem; padding-bottom: 0.75rem;">
                                <span t-out="line.name"/>
                            </td>
                            <td class="text-right border-right border-dark" style="padding-top: 0.75rem; padding-bottom: 0.75rem;">
                                <span t-out="'{:,.2f}'.format(line.quantity) + ' ' + line.product_uom_id.name"/>
                            </td>
                            <td class="text-right border-right border-dark" style="padding-top: 0.75rem; padding-bottom: 0.75rem;">
                                <span t-out="'{:,.2f}'.format(line.price_subtotal)"/>
                            </td>
                            <t t-set="counter" t-value="counter+1"/>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </template>

    <template id="report_account_document_template">
        <t t-call="kbt_account_ext.internal_layout"/>
        <!-- <t t-call="kbt_account_ext.internal_layout_header"/> -->
        <!-- <t t-set="o" t-value="o.with_context(lang=lang)"/> -->
        <!-- <t t-call="kbt_account_ext.internal_layout_body"/> -->

        <!-- <t t-call="kbt_account_ext.internal_layout_footer"/> -->
    </template>

</odoo>
